<!DOCTYPE html>
<html>
<head>
    <title>Image Download</title>
</head>
<body>
<h1>Image Download</h1>
<button id="downloadButton">Download Image</button>

<script>
    document.getElementById('downloadButton').addEventListener('click', function() {
        // 이미지의 URL
        var imageUrl = "${s3ImageUrl}"; // Thymeleaf의 문법으로 서버에서 전달된 이미지 URL을 사용합니다.

        // 이미지를 다운로드하기 위해 AJAX 요청을 보냅니다.
        var xhr = new XMLHttpRequest();
        xhr.open('GET', imageUrl, true);
        xhr.responseType = 'blob'; // 이미지를 Blob 형식으로 받습니다.

        xhr.onload = function(e) {
            if (this.status === 200) {
                // Blob을 파일로 변환합니다.
                var blob = this.response;
                var downloadLink = document.createElement('a');
                downloadLink.href = window.URL.createObjectURL(blob);
                downloadLink.download = 'img.jpg'; // 다운로드될 파일 이름을 지정합니다.

                // 다운로드 링크를 클릭하여 이미지를 다운로드합니다.
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
            }
        };

        // AJAX 요청을 보냅니다.
        xhr.send();
    });
</script>
</body>
</html>
